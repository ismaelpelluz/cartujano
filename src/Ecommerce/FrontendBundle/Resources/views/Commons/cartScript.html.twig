<script>
    $(document).ready(function(){
        $('body').delegate('.add-to-cart', 'click', function(e) {
            e.preventDefault();
            $.post($(this).attr('href'), function (response) {
                console.info(response);
                updateCart();
            });
        });

        $('body').delegate('.empty-cart', 'click', function(e) {
            e.preventDefault();
            $.post($(this).attr('href'), function (response) {
                console.info(response);
                updateCart();
            });
        });

        $('body').delegate('.dropdown-toggle, .dropdown-menu', 'mouseover mouseout', function(e) {
            if (e.type == 'mouseover') {
                $(this).parent().addClass('open');
            } else {
                $(this).parent().removeClass('open');
            }
        });

        $('body').on('click', '.add-to-cart-quantity', function(event) {
            event.preventDefault();
            var quantity = $('#cart-quantity').val();

            $.post($(this).attr('href'), {'quantity' : quantity}, function (response) {
                console.info(response);
                updateCart();
            });
        });

        function updateCart()
        {
            $.get('{{ path('cart_template') }}', function(response) {
                $('.shopping-cart').html(response);
            });
        }
    });
</script>